<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Animals</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <script>(function(){var t=localStorage.getItem("theme");if(t)document.documentElement.setAttribute("data-theme",t);})();</script>
</head>
<body data-page="animals">
  <header class="header">
    <div class="brand">
      <h1>Rabbit Ranch</h1>
      <nav class="nav">
        <a href="/dashboard">Dashboard</a>
        <a class="active" href="/ranch/animals">Animals</a>
        <a href="/ranch/breedings">Breedings</a>
        <a href="/ranch/kindlings">Kindlings</a>
        <a href="/ranch/weanings">Weanings</a>
        <a href="/ranch/harvests">Harvests</a>
        <a href="/ranch/sales">Sales</a>
        <a href="/ranch/feed-costs">Feed Costs</a>
        <a href="/ranch/reports">Reports</a>
      </nav>
    </div>
    <div class="header-actions">
            <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode" title="Toggle dark mode">ðŸŒ™</button>
      <button id="refreshBtn">Refresh</button>
      <a href="/docs" target="_blank" rel="noopener">API Docs</a>
    </div>
  </header>

  <main class="container">
    <section class="two-col">
      <div class="card">
        <h2>Create Animal</h2>
        <form id="animalForm" class="form">
          <label>Tattoo<input name="tattoo" required /></label>
          <label>Sex
            <select name="sex" required>
              <option value="F">F</option>
              <option value="M">M</option>
              <option value="U">U</option>
            </select>
          </label>
          <label>Status
            <select name="status" required>
              <option value="breeder">breeder</option>
              <option value="growout">growout</option>
              <option value="sold">sold</option>
            </select>
          </label>
          <div class="hint" style="grid-column: 1 / -1; margin-top: -4px;">
            To mark an animal <code>harvested</code>, use the Harvests page. To mark <code>deceased</code>, use the Mortality form below.
          </div>
          <label>Breed<input name="breed" /></label>
          <label>Color<input name="color" /></label>
          <label>Birth Date<input type="date" name="birth_date" /></label>
          <label>Source<input name="source" /></label>
          <label>Notes<input name="notes" /></label>
          <button type="submit">Save Animal</button>
        </form>

        <hr class="divider" />

        <h2 style="margin-top:12px;">Record Mortality</h2>
        <form id="mortalityForm" class="form">
          <label>Animal
            <select id="mortalityAnimal" name="animal_id" required>
              <option value="">Select animalâ€¦</option>
            </select>
          </label>
          <label>Death Date<input type="date" name="death_date" /></label>
          <label style="grid-column: 1 / -1;">Reason / Notes<input name="death_reason" placeholder="e.g., illness, injury, unknown" /></label>
          <button type="submit">Mark Deceased</button>
        </form>
        <div class="hint">This sets status to <code>deceased</code> (separate from Harvests).</div>
      </div>

      <div class="card">
        <div class="card-title">
          <h2>Animals</h2>
          <div class="actions-row">
            <div class="tabs" id="animalStatusTabs" role="tablist" aria-label="Animal status">
              <button type="button" class="tab active" data-status="">All</button>
              <button type="button" class="tab" data-status="breeder">Breeders</button>
              <button type="button" class="tab" data-status="growout">Growouts</button>
              <button type="button" class="tab" data-status="sold">Sold</button>
              <button type="button" class="tab" data-status="harvested">Harvested</button>
              <button type="button" class="tab" data-status="deceased">Deceased</button>
            </div>
            <input id="animalFilter" class="filter" placeholder="Filter (tattoo/breed/color/litter)â€¦" />
          </div>
        </div>
        <div class="hint" id="animalCounts">â€”</div>
        <div class="table-wrap">
          <table id="animalsTable">
            <thead><tr><th>ID</th><th>Tattoo</th><th>Sex</th><th>Status</th><th>Birth Date</th><th>Breed</th><th>Litter</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <div id="toast" class="toast" hidden></div>
  <script src="/static/app.js"></script>
</body>
</html>
